<div class="inline-block bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4" role="application" aria-label="Date picker">
  <!-- Header -->
  <div class="flex items-center justify-between mb-4">
    <button
      [disabled]="disabled()"
      (click)="previousMonth()"
      type="button"
      class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"
      aria-label="Previous month"
    >
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <div class="flex items-center gap-2">
      <select
        [disabled]="disabled()"
        [value]="currentMonth()"
        (change)="onMonthChange($event)"
        class="px-3 py-1 text-sm font-semibold text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"
        aria-label="Select month"
      >
        @for (month of availableMonths(); track month.value) {
          <option [value]="month.value">{{ month.name }}</option>
        }
      </select>
      <select
        [disabled]="disabled()"
        [value]="currentYear()"
        (change)="onYearChange($event)"
        class="px-3 py-1 text-sm font-semibold text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"
        aria-label="Select year"
      >
        @for (year of availableYears(); track year) {
          <option [value]="year">{{ year }}</option>
        }
      </select>
    </div>

    <button
      [disabled]="disabled()"
      (click)="nextMonth()"
      type="button"
      class="p-1 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"
      aria-label="Next month"
    >
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>

  <!-- Day names header -->
  <div class="grid grid-cols-7 gap-1 mb-2">
    @for (dayName of dayNames; track dayName) {
      <div class="w-10 h-10 flex items-center justify-center text-xs font-semibold text-gray-500 dark:text-gray-400">
        {{ dayName }}
      </div>
    }
  </div>

  <!-- Calendar grid -->
  <div class="grid grid-cols-7 gap-1" role="grid" aria-label="Calendar">
    @for (date of calendarDays(); track date ? `${date.year}-${date.month}-${date.day}` : $index) {
      @if (date) {
        <button [class]="getDateClasses(date)" [disabled]="isDisabled(date)" [attr.aria-label]="'Select ' + monthNames[date.month - 1] + ' ' + date.day + ', ' + date.year" [attr.aria-selected]="isSelected(date)" [attr.aria-disabled]="isDisabled(date)" (click)="selectDate(date)" type="button" role="gridcell">
          {{ date.day }}
        </button>
      } @else {
        <div class="w-10 h-10"></div>
      }
    }
  </div>

  <!-- Time selection -->
  @if (showTime()) {
    <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-center">
      <ngt-timepicker
        [model]="currentTime()"
        [disabled]="disabled()"
        [showSeconds]="true"
        (timeSelect)="onTimeChange($event)"
      ></ngt-timepicker>
    </div>
  }
</div>
