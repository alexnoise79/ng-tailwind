@if (isOpen()) {
  <div [attr.aria-labelledby]="title() ? 'offcanvas-title' : null" [attr.aria-modal]="true" class="fixed inset-0 z-50 overflow-hidden" role="dialog">
    <!-- Backdrop -->
    @if (backdrop()) {
      <div 
        [class.opacity-0]="!isVisible()" 
        [class.opacity-100]="isVisible()" 
        (click)="onBackdropClick()" 
        class="fixed inset-0 bg-black/50 dark:bg-gray-900/80 transition-opacity"
        aria-hidden="true">
      </div>
    }

    <!-- Offcanvas Panel -->
    <div 
      #offcanvasContent
      [class]="getPositionClasses() + ' ' + getWidthClasses()"
      (click)="$event.stopPropagation()" 
      uiTrapFocus 
      role="document">
      
      <!-- Header -->
      @if (showHeader()) {
        <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 shrink-0">
          @if (title()) {
            <h3 id="offcanvas-title" class="text-lg font-semibold text-gray-900 dark:text-white">
              {{ title() }}
            </h3>
          }
          <button 
            (click)="handleClose()" 
            type="button" 
            class="text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-md p-1 ml-auto" 
            aria-label="Close offcanvas">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
      }

      <!-- Body -->
      <div class="flex-1 overflow-y-auto p-4">
        <ng-content />
      </div>
    </div>
  </div>
}

