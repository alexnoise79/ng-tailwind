<div class="flex flex-nowrap w-full">
  <div class="relative flex-shrink-0 w-[100px] overflow-hidden rounded-l-md">
    @if (model && model.prefix) {
      <div class="absolute inset-[1px] flex items-center gap-1 px-2.5 pointer-events-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-0 leading-none">
        @if (model.prefix.code && ((model.prefix.code.length > 2 ? (model.prefix.code | slice:3:5) : model.prefix.code) | lowercase); as code) {
          <span class="flag-icon flag-icon-{{ code | lowercase }}"></span>
        }
        <div class="flex flex-col max-w-[80px]">
          <div class="text-xs truncate max-w-[57px]">{{ model.prefix.code || '' }}</div>
          <div class="text-[10px]">(+{{ model.prefix.prefix }})</div>
        </div>
      </div>
      <select [(ngModel)]="model.prefix" [disabled]="isDisabled" (ngModelChange)="update(model)" class="w-full h-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-r-0 border-gray-300 dark:border-gray-600 rounded-l-md rounded-r-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-none [&:disabled]:invisible" aria-label="prefix" id="mobile-prefix">
        @for (c of prefixes; track c) {
          <option [ngValue]="c">{{ c.name }} ({{ c.prefix }})</option>
        }
      </select>
    }
  </div>

  @if (model) {
    <div class="flex flex-1">
      <input [(ngModel)]="model.phone" [readonly]="readonly" [placeholder]="placeholder" (blur)="onBlurEvent($event)"
             (ngModelChange)="update({phone:$event, prefix:model.prefix})" class="w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-r-md rounded-l-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:opacity-50 disabled:cursor-not-allowed" id="mobile-phone" type="tel">
    </div>
  }

</div>
